<p-dialog [closable]="false" [visible]="true" [draggable]="false">
  <h1>Registration</h1>
  <form (ngSubmit)="onSubmit()" #registrationForm="ngForm">
    <div>
      <span class="p-input-icon-left">
        <i class="pi pi-envelope"></i>
        <input
          [(ngModel)]="email"
          placeholder="Enter email"
          id="email"
          name="email"
          pInputText
          required
          type="email"
          #emailInput="ngModel"
        />
      </span>
      <!-- Display an error message if the email field is empty -->
      <div
        *ngIf="emailInput.invalid && (emailInput.dirty || emailInput.touched)"
      >
        <small class="p-error">Email is required.</small>
      </div>
      <div *ngIf="!isEmailFormat && (emailInput.dirty || emailInput.touched)">
        <small class="p-error">Invalid email format.</small>
      </div>
    </div>
    <div>
      <span class="p-input-icon-left">
        <i class="pi pi-shield"></i>
        <input
          [(ngModel)]="password"
          placeholder="Enter password"
          id="password"
          name="password"
          pInputText
          required
          type="password"
          #passwordInput="ngModel"
        />
      </span>
      <!-- Display an error message if the password field is empty -->
      <div
        *ngIf="
          passwordInput.invalid &&
          (passwordInput.dirty || passwordInput.touched)
        "
      >
        <small class="p-error">Password is required.</small>
      </div>
    </div>
    <div>
      <span class="p-input-icon-left">
        <i class="pi pi-shield"></i>
        <input
          [(ngModel)]="repeatPassword"
          placeholder="Repeat password"
          id="repeat-password"
          name="repeat-password"
          pInputText
          required
          type="password"
          #repeatPasswordInput="ngModel"
        />
      </span>
      <!-- Display an error message if the password field is empty -->
      <div
        *ngIf="
          repeatPasswordInput.invalid &&
          (repeatPasswordInput.dirty || repeatPasswordInput.touched)
        "
      >
        <small class="p-error">Repeat password is required.</small>
      </div>
      <div *ngIf="!isPasswordMatch() && isFormSubmitted">
        <small class="p-error">Passwords do not match.</small>
      </div>
    </div>
    <div>
      <span class="p-input-icon-left">
        <i class="pi pi-user"></i>
        <input
          [(ngModel)]="firstName"
          placeholder="Enter first name"
          id="first-name"
          name="first-name"
          pInputText
          required
          type="text"
          #firstNameInput="ngModel"
        />
      </span>
      <!-- Display an error message if the first name field is empty -->
      <div
        *ngIf="
          firstNameInput.invalid &&
          (firstNameInput.dirty || firstNameInput.touched)
        "
      >
        <small class="p-error">First name is required.</small>
      </div>
    </div>
    <div>
      <span class="p-input-icon-left">
        <i class="pi pi-user"></i>
        <input
          [(ngModel)]="lastName"
          placeholder="Enter last name"
          id="last-name"
          name="last-name"
          pInputText
          required
          type="text"
          #lastNameInput="ngModel"
        />
      </span>
      <!-- Display an error message if the last name field is empty -->
      <div
        *ngIf="
          lastNameInput.invalid &&
          (lastNameInput.dirty || lastNameInput.touched)
        "
      >
        <small class="p-error">Last name is required.</small>
      </div>
    </div>
    <div>
      <span class="p-input-icon-left">
        <i class="pi pi-id-card"></i>
        <input
          [(ngModel)]="address"
          placeholder="Enter address"
          id="address"
          name="address"
          pInputText
          required
          type="text"
          #addressInput="ngModel"
        />
      </span>
      <div
        *ngIf="
          addressInput.invalid && (addressInput.dirty || addressInput.touched)
        "
      >
        <small class="p-error">Address is required.</small>
      </div>
    </div>
    <div>
      <span class="p-input-icon-left">
        <i class="pi pi-phone"></i>
        <input
          [(ngModel)]="phoneNumber"
          placeholder="Enter phone number"
          id="phone-number"
          name="phone-number"
          pInputText
          required
          type="tel"
          #phoneNumberInput="ngModel"
        />
        <div
          *ngIf="
            phoneNumberInput.invalid &&
            (phoneNumberInput.dirty || phoneNumberInput.touched)
          "
        >
          <small class="p-error">Phone number is required.</small>
        </div>
      </span>
    </div>

    <div class="flex flex-wrap gap-3">
      <div class="flex align-items-center">
        <label class="radio-button-wrapper">
          <p-radioButton
            [(ngModel)]="selectedRole"
            id="roleHost"
            name="role"
            value="HOST"
            #roleInput="ngModel"
          ></p-radioButton>
          <span>Host</span>
        </label>

        <label class="radio-button-wrapper">
          <p-radioButton
            [(ngModel)]="selectedRole"
            id="roleGuest"
            name="role"
            value="GUEST"
            #roleInput="ngModel"
          ></p-radioButton>
          <span>Guest</span>
        </label>
      </div>
      <div *ngIf="selectedRole == '' && isFormSubmitted">
        <small class="p-error">Please select a role.</small>
      </div>
    </div>
    <p-button label="Sign up" type="submit"></p-button>
    <p>
      Already have an account?
      <a class="link-with-underline" routerLink="/login">Sign In</a>
    </p>
  </form>
</p-dialog>
